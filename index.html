<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Make Tim Mad – Ultimate Rage System</title>
  <style>
    /* Global page styling */
    body {
      background: #f2f2f2;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      margin: 0;
    }
    h2 {
      margin-bottom: 10px;
    }
    
    /* Tim's avatar container */
    #timContainer {
      position: relative;
      width: 150px;
      height: 150px;
      margin-bottom: 20px;
    }
    
    /* Tim's head – a simple circle with gentle skin tone */
    #tim {
      position: relative;
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: #fbe9d3;
      transition: transform 0.3s ease, background 0.3s ease;
    }
    
    /* Bowl cut hair (restored) */
    .bowlcut {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 40px;
      background: #a67c52;
      border-top-left-radius: 50%;
      border-top-right-radius: 50%;
    }
    
    /* "Mushroom Head" label next to the bowl cut */
    .label {
      position: absolute;
      top: 5px;
      right: -80px;
      font-size: 14px;
      font-weight: bold;
      color: #a67c52;
    }
    
    /* Face container – centers the eyes and mouth */
    .face {
      position: absolute;
      top: 45%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      width: 100%;
    }
    
    /* Eyes styling */
    .eye {
      width: 15px;
      height: 15px;
      background: white;
      border-radius: 50%;
      display: inline-block;
      margin: 0 10px;
      position: relative;
    }
    .eye::after {
      content: "";
      position: absolute;
      top: 3px;
      left: 4px;
      width: 7px;
      height: 7px;
      background: black;
      border-radius: 50%;
    }
    
    /* Mouth styling – its shape varies according to Tim’s mood */
    .mouth {
      width: 40px;
      height: 20px;
      margin: 10px auto 0;
      transition: all 0.3s ease;
    }
    
    /* Accessory: Beer can (positioned on the right) */
    .beer {
      position: absolute;
      width: 15px;
      height: 30px;
      background: #d4af37;
      border: 2px solid #aa8f00;
      border-radius: 3px;
      right: -20px;
      bottom: 10px;
    }
    
    /* Accessory: Surfboard (positioned on the left) */
    .surfboard {
      position: absolute;
      width: 60px;
      height: 15px;
      background: #00ccff;
      border-radius: 20px;
      left: -30px;
      bottom: -10px;
      transform: rotate(-20deg);
    }
    
    /* Tim’s facial expression state classes */
    .tim-calm .mouth {
      border-bottom: 3px solid black;
      border-radius: 0 0 20px 20px;
    }
    .tim-slightly-annoyed .mouth {
      border-bottom: 3px solid black;
      border-radius: 0 0 10px 10px;
    }
    .tim-annoyed .mouth {
      border-top: 3px solid black;
      border-bottom: none;
      border-radius: 0;
    }
    .tim-angry .mouth {
      border-top: 3px solid black;
      border-bottom: none;
      border-radius: 20px 20px 0 0;
    }
    .tim-furious .mouth {
      border-top: 3px solid black;
      border-bottom: none;
      border-radius: 20px 20px 0 0;
      animation: shake 0.5s infinite;
    }
    
    /* Shake animation for furious mode */
    @keyframes shake {
      0%   { transform: translateX(0); }
      25%  { transform: translateX(-5px); }
      50%  { transform: translateX(5px); }
      75%  { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }
    
    /* Chatbox styling */
    #chatbox {
      width: 400px;
      height: 300px;
      border: 2px solid #444;
      padding: 10px;
      overflow-y: auto;
      background: #fff;
      margin-bottom: 10px;
    }
    #chatbox div {
      margin: 4px 0;
    }
    #userInput {
      width: 390px;
      padding: 5px;
      font-size: 16px;
    }
    
    /* "Made by Noah" rainbow credit in the bottom-right */
    #credit {
      position: fixed;
      bottom: 10px;
      right: 10px;
      font-size: 16px;
      font-weight: bold;
      animation: rainbow 3s infinite linear;
    }
    @keyframes rainbow {
      0%   { color: red; }
      15%  { color: orange; }
      30%  { color: yellow; }
      45%  { color: green; }
      60%  { color: blue; }
      75%  { color: indigo; }
      100% { color: violet; }
    }
  </style>
</head>
<body>
  <h2>Make Tim Mad</h2>
  <div id="timContainer">
    <div id="tim" class="tim-calm">
      <div class="bowlcut"></div>
      <div class="label">Mushroom Head</div>
      <div class="face">
        <div class="eye left"></div>
        <div class="eye right"></div>
        <div class="mouth"></div>
      </div>
      <div class="beer"></div>
      <div class="surfboard"></div>
    </div>
  </div>
  
  <!-- Chat interface -->
  <div id="chatbox"></div>
  <input type="text" id="userInput" placeholder="Say something to Tim..." />
  
  <!-- Rainbow credit -->
  <div id="credit">Made by Noah</div>
  
  <script>
    // Variables for Tim's mood
    let angerLevel = 0;
    let negativeCount = 0; // Count of negative triggers in the conversation
    const timStates = ["tim-calm", "tim-slightly-annoyed", "tim-annoyed", "tim-angry", "tim-furious"];
    const responses = [
      "Hello, how can I help you today?",
      "Hmm... that doesn't sound too friendly.",
      "I'm getting irritated. Where's my beer?",
      "That's it! Bring me some beer and let me surf!",
      "SECRET RAGE MODE ACTIVATED! I'VE HAD ENOUGH!"
    ];
    
    // Base positive words (a small, curated list)
    const positiveWords = ["nice", "thank", "please", "good", "awesome", "great", "calm", "kind", "friendly"];
    
    // Base negative words (curated triggers)
    let negativeWords = ["stupid", "idiot", "hate", "annoying", "bad", "waste", "terrible", "no beer", "no surfing", "no surf"];
    
    // Dynamically add thousands of additional dummy negative trigger words.
    // In a real scenario, these could be replaced by an actual extensive list.
    const additionalCount = 2000; // Adjust to exceed 2000 triggers if desired.
    for (let i = 0; i < additionalCount; i++) {
      negativeWords.push("trigger" + i);
    }
    
    // Function to update Tim's anger level based on message content.
    function updateAngerLevel(message) {
      let lowerMsg = message.toLowerCase();
      let foundNegative = false;
      let foundPositive = false;
      
      // Check for any negative trigger words.
      for (const word of negativeWords) {
        if (lowerMsg.includes(word)) {
          foundNegative = true;
          break;
        }
      }
      
      // Check for any positive words.
      for (const word of positiveWords) {
        if (lowerMsg.includes(word)) {
          foundPositive = true;
          break;
        }
      }
      
      if (foundNegative && !foundPositive) {
        angerLevel = Math.min(angerLevel + 1, timStates.length - 1);
        negativeCount++;
      } else if (foundPositive && !foundNegative) {
        angerLevel = Math.max(angerLevel - 1, 0);
      }
      
      // If many negative triggers have been detected, force "secret rage mode"
      if (negativeCount > 5) {
        angerLevel = timStates.length - 1;
      }
    }
    
    // Function to add a message to the chatbox.
    function addMessage(message, isUser = false) {
      const chatbox = document.getElementById("chatbox");
      const div = document.createElement("div");
      div.textContent = (isUser ? "You: " : "Tim: ") + message;
      chatbox.appendChild(div);
      chatbox.scrollTop = chatbox.scrollHeight;
    }
    
    // Get element references.
    const userInput = document.getElementById("userInput");
    const timElement = document.getElementById("tim");
    
    // Listen for enter key presses; update the chat and Tim’s mood.
    userInput.addEventListener("keypress", function(event) {
      if (event.key === "Enter") {
        const text = userInput.value.trim();
        if (!text) return;
        addMessage(text, true); // Append user's message
        userInput.value = "";
        
        // Update Tim's anger based on the message.
        updateAngerLevel(text);
        timElement.className = timStates[angerLevel];
        addMessage(responses[angerLevel]);
      }
    });
  </script>
</body>
</html>
